
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Trip Planner - Plan Your Perfect Journey</title>
    <meta name="description" content="Craft the perfect journey with intelligent planning powered by AI" />
    <meta name="author" content="Lovable" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        :root {
            --primary: 222.2 47.4% 11.2%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96.1%;
            --secondary-foreground: 222.2 47.4% 11.2%;
            --muted: 210 40% 96.1%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96.1%;
            --accent-foreground: 222.2 47.4% 11.2%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 222.2 84% 4.9%;
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;
            --radius: 0.5rem;
        }

        [data-theme="dark"] {
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --card: 222.2 84% 4.9%;
            --card-foreground: 210 40% 98%;
            --popover: 222.2 84% 4.9%;
            --popover-foreground: 210 40% 98%;
            --primary: 210 40% 98%;
            --primary-foreground: 222.2 47.4% 11.2%;
            --secondary: 217.2 32.6% 17.5%;
            --secondary-foreground: 210 40% 98%;
            --muted: 217.2 32.6% 17.5%;
            --muted-foreground: 215 20.2% 65.1%;
            --accent: 217.2 32.6% 17.5%;
            --accent-foreground: 210 40% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 210 40% 98%;
            --border: 217.2 32.6% 17.5%;
            --input: 217.2 32.6% 17.5%;
            --ring: 212.7 26.8% 83.9%;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, hsl(var(--background)) 0%, hsl(var(--secondary)) 100%);
            color: hsl(var(--foreground));
            line-height: 1.5;
            transition: color 0.3s ease, background-color 0.3s ease;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Optimized scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        .min-h-screen {
            min-height: 100vh;
        }

        .relative {
            position: relative;
        }

        .absolute {
            position: absolute;
        }

        .fixed {
            position: fixed;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Simplified Floating Elements Background for better performance */
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
            will-change: transform;
        }

        .floating-element {
            position: absolute;
            border-radius: 50%;
            opacity: 0.08;
            will-change: transform;
            animation: float 25s infinite linear;
        }

        .floating-element:nth-child(1) {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .floating-element:nth-child(2) {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #f093fb, #f5576c);
            top: 60%;
            right: 15%;
            animation-delay: -10s;
        }

        /* Optimized float animation */
        @keyframes float {
            0% { transform: translate3d(0, 0, 0) rotate(0deg); }
            25% { transform: translate3d(0, -15px, 0) rotate(90deg); }
            50% { transform: translate3d(0, 0, 0) rotate(180deg); }
            75% { transform: translate3d(0, 15px, 0) rotate(270deg); }
            100% { transform: translate3d(0, 0, 0) rotate(360deg); }
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            padding: 5rem 0 7rem;
            position: relative;
            overflow: hidden;
            will-change: transform;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.15) 0%, transparent 50%);
            will-change: transform;
        }

        .hero-content {
            text-align: center;
            position: relative;
            z-index: 10;
            color: white;
        }

        .hero-title {
            font-family: 'Poppins', sans-serif;
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            background: linear-gradient(45deg, #ffffff, #e0e7ff, #c7d2fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: slideInDown 1s ease-out;
            line-height: 1.1;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .hero-subtitle {
            font-size: 1.4rem;
            opacity: 0.95;
            margin-bottom: 2rem;
            animation: slideInUp 1s ease-out 0.3s both;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 300;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .hero-icon {
            font-size: 2.5rem;
            margin-right: 1rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Main Content */
        .main-content {
            margin-top: -4rem;
            position: relative;
            z-index: 20;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            margin-bottom: 4rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            padding: 2.5rem;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
            will-change: transform;
        }

        [data-theme="dark"] .card {
            background: rgba(31, 41, 55, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #4facfe);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover {
            transform: translateY(-8px) scale(1.01);
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.12),
                0 0 0 1px rgba(255, 255, 255, 0.2);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1.2rem;
            margin-bottom: 2rem;
        }

        .card-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .card-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 600;
            color: hsl(var(--foreground));
            margin: 0;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 2rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 1rem;
            color: hsl(var(--foreground));
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-textarea {
            width: 100%;
            min-height: 160px;
            padding: 1.5rem;
            border: 2px solid hsl(var(--input));
            border-radius: 16px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.8);
            color: hsl(var(--foreground));
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            resize: vertical;
            backdrop-filter: blur(10px);
        }

        [data-theme="dark"] .form-textarea {
            background: rgba(31, 41, 55, 0.8);
        }

        .form-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 
                0 0 0 4px rgba(102, 126, 234, 0.1),
                0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .form-textarea::placeholder {
            color: hsl(var(--muted-foreground));
            font-style: italic;
        }

        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            border-radius: 16px;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: none;
            font-family: 'Inter', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1.25rem 2.5rem;
            width: 100%;
            font-size: 1.1rem;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #5a67d8, #68d391);
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        /* Sample Prompts */
        .sample-prompts {
            margin-top: 2.5rem;
        }

        .sample-prompts h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: hsl(var(--foreground));
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .sample-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(240, 147, 251, 0.05));
            border: 2px solid rgba(102, 126, 234, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.2rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .sample-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.6s;
        }

        .sample-card:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateX(6px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            border-color: transparent;
        }

        .sample-card:hover::before {
            left: 100%;
        }

        .sample-card-title {
            font-weight: 700;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
            font-family: 'Poppins', sans-serif;
        }

        .sample-card-text {
            font-size: 0.95rem;
            opacity: 0.9;
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }

        .sample-card-hint {
            font-size: 0.85rem;
            font-style: italic;
            opacity: 0.7;
            font-family: 'Dancing Script', cursive;
        }

        /* Notice Card */
        .notice-card {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 2px solid #f59e0b;
            border-radius: 16px;
            padding: 2rem;
            margin-top: 2.5rem;
            position: relative;
            overflow: hidden;
        }

        .notice-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(50%, -50%);
        }

        .notice-card h4 {
            color: #92400e;
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
        }

        .notice-card ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .notice-card li {
            padding: 0.5rem 0;
            position: relative;
            padding-left: 2rem;
            color: #92400e;
            font-weight: 500;
        }

        .notice-card li::before {
            content: '‚ú®';
            position: absolute;
            left: 0;
            font-size: 1.2rem;
        }

        /* Results Section */
        .results-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            overflow: hidden;
            min-height: 700px;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        [data-theme="dark"] .results-container {
            background: rgba(31, 41, 55, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .results-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 2rem 2.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 1rem;
            font-family: 'Poppins', sans-serif;
            font-size: 1.2rem;
            position: relative;
        }

        .results-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
        }

        .results-content {
            padding: 2.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .placeholder {
            text-align: center;
            color: hsl(var(--muted-foreground));
            padding: 4rem 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
        }

        .placeholder-icon {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            opacity: 0.3;
        }

        .placeholder h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: hsl(var(--foreground));
            font-weight: 600;
        }

        .placeholder p {
            font-size: 1.1rem;
            opacity: 0.8;
            max-width: 400px;
            line-height: 1.6;
        }

        /* Log Items */
        .log-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            margin-bottom: 0.75rem;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05));
            border-radius: 12px;
            color: hsl(var(--muted-foreground));
            animation: slideInLeft 0.5s ease-out;
            border-left: 4px solid #10b981;
            backdrop-filter: blur(10px);
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .error-item {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.05));
            border: 2px solid #fca5a5;
            border-left: 4px solid #ef4444;
            color: #dc2626;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            animation: shake 0.6s ease-in-out;
            backdrop-filter: blur(10px);
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        /* Final Plan Styles */
        .final-plan {
            line-height: 1.8;
            color: hsl(var(--foreground));
            animation: fadeIn 0.8s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .final-plan h1, .final-plan h2, .final-plan h3 {
            color: #667eea;
            margin: 2rem 0 1.2rem 0;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        .final-plan h1 {
            font-size: 2.2rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 0.75rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .final-plan h2 {
            font-size: 1.6rem;
        }

        .final-plan h3 {
            font-size: 1.3rem;
        }

        .final-plan p {
            margin-bottom: 1.2rem;
            font-size: 1.05rem;
        }

        .final-plan ul, .final-plan ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }

        .final-plan li {
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 25px;
            right: 25px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            color: hsl(var(--foreground));
        }

        [data-theme="dark"] .theme-toggle {
            background: rgba(31, 41, 55, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2);
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid transparent;
            border-top: 3px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.8rem;
            }
            
            .hero-subtitle {
                font-size: 1.2rem;
            }
            
            .main-content {
                grid-template-columns: 1fr;
                gap: 2rem;
                margin-top: -3rem;
            }
            
            .card {
                padding: 2rem;
            }
            
            .container {
                padding: 0 1rem;
            }

            .hero-section {
                padding: 4rem 0 5rem;
            }

            .results-container {
                min-height: 500px;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2.2rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .card-header {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .theme-toggle {
                width: 50px;
                height: 50px;
                top: 20px;
                right: 20px;
            }
        }

        /* Utility Classes */
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }

        .hidden {
            display: none;
        }

        .text-center {
            text-align: center;
        }

        .flex {
            display: flex;
        }

        .items-center {
            align-items: center;
        }

        .justify-center {
            justify-content: center;
        }

        .gap-2 {
            gap: 0.5rem;
        }

        .mb-4 {
            margin-bottom: 1rem;
        }

        .mt-4 {
            margin-top: 1rem;
        }

        /* Performance optimizations */
        .card, .sample-card, .btn, .theme-toggle {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
    </style>
</head>

<body>
    <!-- Simplified Floating Background Elements -->
    <div class="floating-elements">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
    </div>

    <div class="theme-toggle" onclick="toggleTheme()">
        <i data-lucide="moon" id="theme-icon"></i>
    </div>

    <div class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">
                    <i data-lucide="plane" class="hero-icon"></i>
                    AI Trip Planner
                </h1>
                <p class="hero-subtitle">
                    Craft the perfect journey with intelligent planning. Just describe your dream trip and let AI handle the rest.
                </p>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="main-content">
            <!-- Left Column: Input Form -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">
                        <i data-lucide="edit-3"></i>
                    </div>
                    <h2 class="card-title">Plan Your Trip</h2>
                </div>

                <form id="plannerForm">
                    <div class="form-group">
                        <label for="prompt" class="form-label">
                            <i data-lucide="lightbulb"></i> 
                            Your Trip Prompt
                        </label>
                        <textarea 
                            id="prompt" 
                            class="form-textarea" 
                            placeholder="Describe your dream trip here... Include your origin, destination, dates, and interests!"
                            rows="6"
                        ></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" id="submitBtn">
                        <i data-lucide="send"></i>
                        Plan My Trip
                    </button>
                </form>

                <div class="sample-prompts">
                    <h3>
                        <i data-lucide="lightbulb"></i> 
                        Try a Sample Prompt
                    </h3>
                    
                    <div class="sample-card" onclick="setPrompt(this)">
                        <div class="sample-card-title">üèñÔ∏è Goa Beach & Temple Adventure</div>
                        <div class="sample-card-text">Plan a 7-day trip to Goa, India, from my home in Delhi, India. We want to leave on October 10th, 2025. We are interested in temples, beaches, and seafood. Please find flights and hotels. My email is hiteshofficial0001@gmail.com</div>
                        <div class="sample-card-hint">Perfect example with all required details</div>
                    </div>

                    <div class="sample-card" onclick="setPrompt(this)">
                        <div class="sample-card-title">üé® Parisian Art & Cuisine Tour</div>
                        <div class="sample-card-text">Create a 5-day itinerary for a solo traveler in Paris, France from New York City for the first week of next April. Focus on art museums, historical landmarks, and authentic French cuisine. Find hotel options near the Louvre. Send plan to me@example.com</div>
                        <div class="sample-card-hint">Uses relative dates and specific interests</div>
                    </div>

                    <div class="sample-card" onclick="setPrompt(this)">
                        <div class="sample-card-title">üèîÔ∏è Swiss Alps Adventure</div>
                        <div class="sample-card-text">Plan a 10-day hiking and photography trip to the Swiss Alps from London, UK, departing June 15th, 2025. Looking for mountain lodges, scenic train routes, and hiking trails. Budget is around $3000. Email: adventure@example.com</div>
                        <div class="sample-card-hint">Includes budget and specific activities</div>
                    </div>
                </div>

                <div class="notice-card">
                    <h4>
                        <i data-lucide="info"></i>
                        For Best Results Include:
                    </h4>
                    <ul>
                        <li><strong>Origin:</strong> Where you're traveling from</li>
                        <li><strong>Destination:</strong> Where you want to go</li>
                        <li><strong>Dates:</strong> Specific departure/return dates</li>
                        <li><strong>Interests:</strong> What you want to do/see</li>
                        <li><strong>Email:</strong> To receive your itinerary (optional)</li>
                    </ul>
                    <small style="color: #92400e; font-style: italic; margin-top: 0.5rem; display: block;">
                        The AI works best with detailed, specific prompts. Vague requests may result in errors.
                    </small>
                </div>
            </div>

            <!-- Right Column: Results -->
            <div class="card results-container">
                <div class="results-header">
                    <i data-lucide="map-pin"></i>
                    Your Trip Plan
                </div>
                <div class="results-content">
                    <div id="logList"></div>
                    <div id="finalPlan" class="final-plan"></div>
                    <div id="placeholder" class="placeholder">
                        <div class="placeholder-icon">
                            <i data-lucide="route"></i>
                        </div>
                        <h3>Ready to Plan Your Adventure?</h3>
                        <p>Enter your trip details on the left and watch as AI crafts your perfect itinerary!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // API Configuration
        const API_URL = 'https://travel-agent-r8a6.onrender.com';

        // DOM Elements
        const plannerForm = document.getElementById('plannerForm');
        const promptInput = document.getElementById('prompt');
        const submitBtn = document.getElementById('submitBtn');
        const logList = document.getElementById('logList');
        const finalPlan = document.getElementById('finalPlan');
        const placeholder = document.getElementById('placeholder');

        // Theme Management
        function toggleTheme() {
            const html = document.documentElement;
            const themeIcon = document.getElementById('theme-icon');
            const currentTheme = html.getAttribute('data-theme');
            
            if (currentTheme === 'dark') {
                html.setAttribute('data-theme', 'light');
                themeIcon.setAttribute('data-lucide', 'moon');
                localStorage.setItem('theme', 'light');
            } else {
                html.setAttribute('data-theme', 'dark');
                themeIcon.setAttribute('data-lucide', 'sun');
                localStorage.setItem('theme', 'dark');
            }
            
            // Reinitialize icons after changing
            lucide.createIcons();
        }

        // Load saved theme
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            const themeIcon = document.getElementById('theme-icon');
            
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeIcon.setAttribute('data-lucide', 'sun');
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
                themeIcon.setAttribute('data-lucide', 'moon');
            }
            
            lucide.createIcons();
        }

        // Set prompt from sample
        function setPrompt(element) {
            const promptText = element.querySelector('.sample-card-text').textContent;
            promptInput.value = promptText.trim();
            promptInput.focus();
            
            // Add visual feedback
            element.style.transform = 'scale(0.98)';
            setTimeout(() => {
                element.style.transform = '';
            }, 150);
        }

        // Handle form submission
        plannerForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            
            const prompt = promptInput.value.trim();
            if (!prompt) {
                showNotification('Please enter a trip prompt.', 'warning');
                return;
            }

            // Reset UI
            setLoadingState(true);
            clearResults();
            hideElement(placeholder);

            try {
                const response = await fetch(`${API_URL}/api/v1/plan-trip`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: prompt }),
                });

                if (!response.body) {
                    throw new Error('Response body is null.');
                }

                const reader = response.body.getReader();
                const decoder = new TextDecoder();

                while (true) {
                    const { done, value } = await reader.read();
                    if (done) break;
                    
                    const chunk = decoder.decode(value, { stream: true });
                    const lines = chunk.split('\n\n');

                    lines.forEach(line => {
                        if (line.startsWith('data: ')) {
                            const data = line.substring(6);
                            try {
                                const message = JSON.parse(data);
                                handleStreamMessage(message);
                            } catch (e) {
                                console.error('Failed to parse JSON:', data);
                            }
                        }
                    });
                }

            } catch (error) {
                console.error('Fetch error:', error);
                showError(`Network error: ${error.message}`);
            } finally {
                setLoadingState(false);
            }
        });

        // Handle streaming messages
        function handleStreamMessage(message) {
            if (!message || !message.type) return;

            switch (message.type) {
                case 'log':
                    addLogMessage(message.content);
                    break;
                case 'result':
                    displayFinalPlan(message.content);
                    break;
                case 'error':
                    showError(message.content);
                    break;
            }
        }

        // UI Helper Functions
        function setLoadingState(isLoading) {
            if (isLoading) {
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<div class="spinner"></div> Planning Your Trip...';
                submitBtn.classList.add('pulse');
            } else {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i data-lucide="send"></i> Plan My Trip';
                submitBtn.classList.remove('pulse');
                lucide.createIcons();
            }
        }

        function clearResults() {
            logList.innerHTML = '';
            finalPlan.innerHTML = '';
        }

        function hideElement(element) {
            element.style.display = 'none';
        }

        function showElement(element) {
            element.style.display = 'block';
        }

        function addLogMessage(content) {
            const logElement = document.createElement('div');
            logElement.className = 'log-item';
            logElement.innerHTML = `
                <i data-lucide="check-circle" style="color: #10b981;"></i>
                <span>${content}</span>
            `;
            logList.appendChild(logElement);
            lucide.createIcons();
        }

        function showError(content) {
            const errorElement = document.createElement('div');
            errorElement.className = 'error-item';
            errorElement.innerHTML = `
                <i data-lucide="alert-triangle" style="color: #ef4444; margin-right: 0.5rem;"></i>
                <strong>Error:</strong> ${content}
            `;
            logList.appendChild(errorElement);
            lucide.createIcons();
        }

        function displayFinalPlan(content) {
            try {
                const htmlContent = marked.parse(content);
                finalPlan.innerHTML = htmlContent;
                finalPlan.classList.add('fade-in');
                
                // Smooth scroll to results
                finalPlan.scrollIntoView({ behavior: 'smooth', block: 'start' });
            } catch (error) {
                console.error('Error parsing markdown:', error);
                finalPlan.textContent = content;
            }
        }

        function showNotification(message, type = 'info') {
            // Enhanced notification with modern styling
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 30px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'warning' ? 'linear-gradient(135deg, #f59e0b, #d97706)' : 'linear-gradient(135deg, #667eea, #764ba2)'};
                color: white;
                padding: 1rem 2rem;
                border-radius: 16px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideInDown 0.3s ease-out;
                backdrop-filter: blur(10px);
                font-weight: 600;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Enhanced animations and interactions with throttling for performance
        function addInteractionEffects() {
            // Add focus effects to textarea
            promptInput.addEventListener('focus', () => {
                promptInput.parentElement.style.transform = 'scale(1.02)';
            });
            
            promptInput.addEventListener('blur', () => {
                promptInput.parentElement.style.transform = 'scale(1)';
            });

            // Optimized intersection observer for scroll animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // Observe cards for scroll animations
            document.querySelectorAll('.card').forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(card);
            });
        }

        // Initialize the application
        function init() {
            loadTheme();
            addInteractionEffects();
            
            // Add welcoming animation
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 0.5s ease';
            
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 100);

            // Initialize all icons
            lucide.createIcons();
        }

        // Initialize when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

        // Throttled scroll handler for performance
        let ticking = false;
        function updateScrollEffects() {
            const scrolled = window.pageYOffset;
            const heroSection = document.querySelector('.hero-section');
            if (heroSection) {
                heroSection.style.transform = `translateY(${scrolled * 0.3}px)`;
            }
            ticking = false;
        }

        window.addEventListener('scroll', () => {
            if (!ticking) {
                requestAnimationFrame(updateScrollEffects);
                ticking = true;
            }
        });
    </script>
</body>
</html>
